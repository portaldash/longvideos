<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CSV Viewer</title>
  <style>
    body {
      background: black;
      color: #fff;
      font-family: monospace;
      padding: 1px;
      white-space: pre-wrap;
      overflow-wrap: break-word;
    }
    #controls {
      margin-bottom: 1px;
    }
    button {
      background: #111;
      border: 1px solid #fff;
      color: #fff;
      padding: 5px 20px;
      cursor: pointer;
      margin-right: 5px;
    }
  </style>
</head>
<body>

<div id="controls">
  <button id="prevBtn">Prev</button>
  <span id="pageInfo">Page 1</span>
  <button id="nextBtn">Next</button>
</div>

<pre id="csvContent">Loading...</pre>

<script>
  const CSV_API = "https://1b2e6f8d-d553-4f38-8e9a-f432ecd32939-00-f6ednmntwg59.picard.replit.dev/data";
  let currentPage = 1;

  async function loadPage(page) {
    try {
      const res = await fetch(`${CSV_API}?page=${page}`);
      if (!res.ok) throw new Error("Failed to load CSV chunk");
      const text = await res.text();
      document.getElementById("csvContent").textContent = text;
      document.getElementById("pageInfo").textContent = `Page ${page}`;
      currentPage = page;
    } catch (e) {
      document.getElementById("csvContent").textContent = e.message;
    }
  }

  document.getElementById("prevBtn").onclick = () => {
    if (currentPage > 1) loadPage(currentPage - 1);
  };

  document.getElementById("nextBtn").onclick = () => {
    loadPage(currentPage + 1);
  };

  loadPage(currentPage);
</script>

</body>
</html>
