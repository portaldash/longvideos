<!DOCTYPE html>
<html>
<head>
  <title>Long Videos</title>
  <style>
    body {
      background-color: #121212;
      color: #ccc;
      font-family: monospace;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    td, th {
      border: 1px solid #333;
      padding: 4px;
    }
    button {
      margin: 10px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <h2>Long Videos</h2>
  <div>
    <button onclick="prevPage()">Prev</button>
    <button onclick="nextPage()">Next</button>
    <span id="status"></span>
  </div>
  <table id="csvTable"></table>

  <script>
    let currentPage = 1;
    const pageSize = 1000;
    const apiUrl = "https://YOUR_REPLIT_URL/data";

    async function fetchPage(page) {
      document.getElementById("status").textContent = `Loading page ${page}...`;

      const res = await fetch(`${apiUrl}?page=${page}&size=${pageSize}`);
      const json = await res.json();
      const data = json.data;

      const table = document.getElementById("csvTable");
      table.innerHTML = "";

      if (data.length === 0) {
        table.innerHTML = "<tr><td>No data</td></tr>";
        return;
      }

      // Header
      const headers = Object.keys(data[0]);
      const headerRow = document.createElement("tr");
      headers.forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
      });
      table.appendChild(headerRow);

      // Rows
      data.forEach(row => {
        const tr = document.createElement("tr");
        headers.forEach(h => {
          const td = document.createElement("td");
          td.textContent = row[h];
          tr.appendChild(td);
        });
        table.appendChild(tr);
      });

      document.getElementById("status").textContent = `Page ${page}`;
    }

    function nextPage() {
      currentPage++;
      fetchPage(currentPage);
    }

    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        fetchPage(currentPage);
      }
    }

    fetchPage(currentPage);
  </script>
</body>
</html>
